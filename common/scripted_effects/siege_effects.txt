####
#	SCRIPTED EFFECTS for the Siege events. Colateral damage, enslavement, etc
#	This code uses heavily the scripted effect and "dynamic inputs", where you can add $xx$ (dollar key), and determine this in the event. 
#	In your event if you write, instead of a simple scripted effect ( collateral damage = yes ) you use this: ( collateral = { hd = 20 } ) it will use this 20 inside the $hd$ field. This means that we can use the same effect below, but dependent on several % of 20, 40, 60, etc, withouth having to write one effect for each. 
#	If you have doubts or comments on that, contact us on Discord. Here's the wiki resources: https://eu4.paradoxwikis.com/Commands#Scripted_Effects 
####

define_sack_and_devastation = {
	set_variable = { which = sack_lost value = $sackvalue$ }		divide_variable = { which = sack_lost value = 100 }
	multiply_variable = { which = sack_lost which = loot_value } 	multiply_variable = { which = sack_lost which = sack_ratio }
	set_variable = { which = prov_devst value = $devst$ } 			multiply_variable = { which = prov_devst which = sack_ratio }
	set_variable = { which = col_value which = prov_devst }			divide_variable = { which = col_value value = 100 }
	multiply_variable = { which = col_value which = loot_value }
	
	# Show variables in the province modifier, to see what happened
	set_variable = { which = SS_looted_value which = sack_lost }	
	set_variable = { which = SS_devastation_done which = prov_devst }
	change_variable = { which = PS_tot_loot which = SS_looted_value }	# this is historical, will accumulate always
}

###
#	ENSLAVEMENT EFFECTS, happening in the Siege events
###

enslave_effect_soft = {
	# Send slaves to besieger
	set_variable = { which = SS_soft_total which = FROM } 
	change_variable = { which = slaves which = SS_soft_total }
	set_variable = { which = SS_soft_total value = 0 }
	
	# Lose pops. Uses the xx lost done in the event, immediate phase
	FROM = {
		set_variable = { which = SS_slaves_taken which = SS_soft_total }	# display in prov modifier
		set_variable = { which = SS_tlost_display which = SS_t_lost }
		set_variable = { which = SS_clost_display which = SS_c_lost }
		set_variable = { which = SS_ulost_display which = SS_u_lost }
		
		while = { 
			limit = { check_variable = { SS_t_lost = 1 } } 
			subtract_variable = { SS_t_lost = 1 } add_base_manpower = -1 
			change_variable = { PS_rur_slv = 0.4 } change_variable = { PS_rur_sieg = 0.6 }	# slv enslaved; sig perished in siege
		}
		while = { 
			limit = { check_variable = { SS_c_lost = 1 } } 
			subtract_variable = { SS_c_lost = 1 } add_base_production = -1 
			change_variable = { PS_urb_slv = 0.4 } change_variable = { PS_urb_sieg = 0.6 }
		}
		while = { 
			limit = { check_variable = { SS_u_lost = 1 } } 
			subtract_variable = { SS_u_lost = 1 } add_base_tax = -1 
			change_variable = { PS_upp_slv = 0.4 } change_variable = { PS_upp_sieg = 0.6 }
		}
	
		# Province modifier effect
		add_province_modifier = { name = SS_enslavement_here duration = $days$ }
		every_neighbor_province = {
			limit = { controlled_by = event_target:SS_prov_owner }
			add_province_modifier = { name = SS_enslv_there_hostile duration = $days$ }
		}
		every_neighbor_province = {
			limit = { controlled_by = ROOT }
			add_province_modifier = { name = SS_enslv_there_friend duration = $days$ }
		}
		
	}
	
	
	
}

enslave_effect_hard = {
	# Send slaves to besieger
	set_variable = { which = SS_hard_total which = FROM } 
	change_variable = { which = slaves which = SS_hard_total }
	set_variable = { which = SS_hard_total value = 0 }
	
	# Lose pops. Uses the xx lost done in the event, immediate phase
	FROM = {
		set_variable = { which = SS_slaves_taken which = SS_hard_total }	# display in prov modifier
		set_variable = { which = SS_tlost_display which = SS_t_lost }
		set_variable = { which = SS_clost_display which = SS_c_lost }
		set_variable = { which = SS_ulost_display which = SS_u_lost }
		
		while = { 
			limit = { check_variable = { SS_t_lost = 1 } } 
			subtract_variable = { SS_t_lost = 1 } add_base_manpower = -1 
			change_variable = { PS_rur_slv = 0.8 } change_variable = { PS_rur_sieg = 0.2 }	# slv enslaved; sig perished in siege
			change_variable = { PS_sieg_lost = 1 }
		}
		while = { 
			limit = { check_variable = { SS_c_lost = 1 } } 
			subtract_variable = { SS_c_lost = 1 } add_base_production = -1 
			change_variable = { PS_urb_slv = 0.8 } change_variable = { PS_urb_sieg = 0.2 } change_variable = { PS_sieg_lost = 1 }
		}
		while = { 
			limit = { check_variable = { SS_u_lost = 1 } } 
			subtract_variable = { SS_u_lost = 1 } add_base_tax = -1 
			change_variable = { PS_upp_slv = 0.8 } change_variable = { PS_upp_sieg = 0.2 } change_variable = { PS_sieg_lost = 1 }
		}
	
		# Province modifier effect
		add_province_modifier = { name = SS_enslavement_here duration = $days$ }
		every_neighbor_province = {
			limit = { controlled_by = event_target:SS_prov_owner }
			add_province_modifier = { name = SS_enslv_there_hostile duration = $days$ }
		}
		every_neighbor_province = {
			limit = { controlled_by = ROOT }
			add_province_modifier = { name = SS_enslv_there_friend duration = $days$ }
		}
		
	}
	
}

enslave_delenda_effect = {
	# Define everyone (all but the 1 pop left). Recalculates amount lost, the event desc will be different
		
	FROM = {
		
		set_variable = { which = SS_t_lost which = SS_t_base } subtract_variable = { SS_t_lost = 1 }
		set_variable = { which = SS_c_lost which = SS_c_base } subtract_variable = { SS_c_lost = 1 }
		set_variable = { which = SS_u_lost which = SS_u_base } subtract_variable = { SS_u_lost = 1 }
		
		set_variable = { which = SS_tlost_display which = SS_t_lost }
		set_variable = { which = SS_clost_display which = SS_c_lost }
		set_variable = { which = SS_ulost_display which = SS_u_lost }
				
		set_variable = { which = SS_delenda_total which = SS_t_lost } 		change_variable = { which = SS_delenda_total which = SS_c_lost }
		change_variable = { which = SS_delenda_total which = SS_u_lost }	multiply_variable = { SS_delenda_total = 2 }			
			# yes, only 20%. Carthago 146 bc had 450k killed and 50k enslaved, so 20% is even high... 
		
		set_variable = { which = SS_slaves_taken which = SS_delenda_total }	# display in prov modifier
		
		while = { 
			limit = { check_variable = { SS_t_lost = 0.9 } } 
			subtract_variable = { SS_t_lost = 1 } add_base_manpower = -1 
			change_variable = { PS_rur_slv = 0.2 } change_variable = { PS_rur_sieg = 0.8 }	# slv enslaved; sig perished in siege
		}
		while = { 
			limit = { check_variable = { SS_c_lost = 0.9 } } 
			subtract_variable = { SS_c_lost = 1 } add_base_production = -1 
			change_variable = { PS_urb_slv = 0.2 } change_variable = { PS_urb_sieg = 0.8 }	# slv enslaved; sig perished in siege
		}
		while = { 
			limit = { check_variable = { SS_u_lost = 0.9 } } 
			subtract_variable = { SS_u_lost = 1 } add_base_tax = -1 
			change_variable = { PS_upp_slv = 0.2 } change_variable = { PS_upp_sieg = 0.8 }	# slv enslaved; sig perished in siege
		}
	
	
	
	
		# Province modifier effect
		add_province_modifier = { name = SS_enslavement_here duration = $days$ }
		every_neighbor_province = {
			limit = { OR = { owned_by = event_target:SS_prov_owner controlled_by = event_target:SS_prov_owner } }
			add_province_modifier = { name = SS_enslv_there_hostile duration = $days$ }
		}
		every_neighbor_province = {
			limit = { OR = { owned_by = ROOT controlled_by = ROOT } }
			add_province_modifier = { name = SS_enslv_there_friend duration = $days$ }
		}
		
	}
	
	set_variable = { which = SS_delenda_total which = FROM }
	change_variable = { which = slaves which = SS_delenda_total }
	set_variable = { which = SS_delenda_total value = 0 }
	
}


collateral_damage_eff = {
	random_list = {
		10 = { trigger_switch = { on_trigger = has_building
			small_bath = { 	subtract_variable = { col_value = 150 } 	col_1_$hd$ = { val = 150 target = small_bath } }
			big_bath = { 	subtract_variable = { col_value = 300 } 	col_2_$hd$ = { val = 300 target = big_bath to_build = small_bath } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			mathematician_academy = { 	subtract_variable = { col_value = 1000 } 	col_1_$hd$ = { val = 1000 target = mathematician_academy } }
			philosophers_academy = { 	subtract_variable = { col_value = 1000 } 	col_1_$hd$ = { val = 1000 target = philosophers_academy } }
			military_academy = { 		subtract_variable = { col_value = 1000 } 	col_1_$hd$ = { val = 1000 target = military_academy } }
			great_library = { subtract_variable = { col_value = 1000 } 	col_2_$hd$ = { tval = 1000 arget = great_library to_build = library } }
				# He he, Library of Alexandria goes brrrr
			library = { subtract_variable = { col_value = 250 } 	col_1_$hd$ = { val = 250 target = library } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			embassy = { 			subtract_variable = { col_value = 375 } col_1_$hd$ = { val = 375 target = embassy } }
			diplomats_quarter = { 	subtract_variable = { col_value = 750 } 
									col_2_$hd$ = { val = 750 target = diplomats_quarter to_build = embassy } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_townhall = { 		subtract_variable = { col_value = 300 } col_1_$hd$ = { val = 300 target = small_townhall } }
			big_townhall = { 		subtract_variable = { col_value = 375 } 
									col_2_$hd$ = { val = 375 target = big_townhall to_build = small_townhall } }
			government_palace = { 	subtract_variable = { col_value = 600 } 
									col_2_$hd$ = { val = 600 target = government_palace to_build = big_townhall } }
			government_district = { subtract_variable = { col_value = 750 } 
									col_2_$hd$ = { val = 750 target = government_district to_build = government_palace } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_grain_depot = { 	subtract_variable = { col_value = 225 } col_1_$hd$ = { val = 225 target = small_grain_depot } }
			big_grain_depot = { 	subtract_variable = { col_value = 450 } 
									col_2_$hd$ = { val = 450 target = big_grain_depot to_build = small_grain_depot } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_market = { 	subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = small_market } }
			medium_market = { 	subtract_variable = { col_value = 225 } col_2_$hd$ = { val = 225 target = medium_market to_build = small_market } }
			great_market = { 	subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = great_market to_build = medium_market } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_harbor = { 	subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = small_harbor } }
			big_harbor = { 		subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = big_harbor to_build = small_harbor } }
			harbor_district = { subtract_variable = { col_value = 450 } col_2_$hd$ = { val = 450 target = harbor_district to_build = big_harbor } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_army_camp = { 			subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = small_army_camp } }
			small_military_settlement = { 	subtract_variable = { col_value = 260 } 
											col_2_$hd$ = { val = 260 target = small_military_settlement to_build = small_army_camp } }
			big_military_settlement = { 	subtract_variable = { col_value = 375 } 
											col_2_$hd$ = { val = 375 target = big_military_settlement to_build = small_military_settlement } }
		} }
		10 = { 
			if = { limit = { has_building = small_conscription_center } 
			subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = small_conscription_center }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_water_irrigation = { 	subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = small_water_irrigation } }
			big_water_irrigation = { 	subtract_variable = { col_value = 300 } 
										col_2_$hd$ = { val = 300 target = big_water_irrigation to_build = small_water_irrigation } }
			big_estate = { 				subtract_variable = { col_value = 412 } 
										col_2_$hd$ = { val = 412 target = big_estate to_build = big_water_irrigation } }
			
			craftsman = { 		subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = craftsman } }
			small_workshop = { 	subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = small_workshop to_build = craftsman } }
			artisan_district = { subtract_variable = { col_value = 412 } col_2_$hd$ = { val = 412 target = artisan_district to_build = small_workshop } }
			
			quarry = { 			subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = quarry } }
			small_mine = { 		subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = small_mine to_build = quarry } }
			big_mine = { 		subtract_variable = { col_value = 412 } col_2_$hd$ = { val = 412 target = big_mine to_build = small_mine } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_shipyard = { 	subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = small_shipyard } }
			big_shipyard = { 	subtract_variable = { col_value = 375 } col_2_$hd$ = { val = 375 target = big_shipyard to_build = small_shipyard } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			military_monument = { subtract_variable = { col_value = 750 } col_1_$hd$ = { val = 750 target = military_monument } }
			naval_monument = { 	subtract_variable = { col_value = 750 } col_1_$hd$ = { val = 750 target = naval_monument } }
			imperial_palace = { subtract_variable = { col_value = 1500 } col_1_$hd$ = { val = 1500 target = imperial_palace } }
			palace_garden = { 	subtract_variable = { col_value = 1500 } col_1_$hd$ = { val = 1500 target = palace_garden } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			taxman = { 			subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = taxman } }
			tax_collector = { 	subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = tax_collector to_build = taxman } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			shrine = { 			subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = shrine } }
			small_temple = { 	subtract_variable = { col_value = 225 } col_2_$hd$ = { val = 225 target = small_temple to_build = shrine } }
			great_temple = { 	subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = great_temple to_build = small_temple } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			small_theater = { 	subtract_variable = { col_value = 225 } col_1_$hd$ = { val = 225 target = small_theater } }
			big_theater = { 	subtract_variable = { col_value = 375 } col_2_$hd$ = { val = 375 target = big_theater to_build = small_theater } }
			great_theater = { 	subtract_variable = { col_value = 525 } col_2_$hd$ = { val = 525 target = great_theater to_build = big_theater } }
			huge_theater = { 	subtract_variable = { col_value = 750 } col_2_$hd$ = { val = 750 target = huge_theater to_build = great_theater } }
		} }
		10 = { trigger_switch = { on_trigger = has_building
			gravel_road = { 	subtract_variable = { col_value = 187 } col_1_$hd$ = { val = 187 target = gravel_road } }
			paved_road = { 		subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = paved_road to_build = gravel_road } }
			imperial_road = { 	subtract_variable = { col_value = 375 } col_2_$hd$ = { val = 375 target = imperial_road to_build = paved_road } }
		} }
		10 = { trigger_switch = { on_trigger = has_building 			# Last building, should be the last to survive.  
			herbalist = { 	subtract_variable = { col_value = 150 } col_1_$hd$ = { val = 150 target = herbalist } }
			medicus = { 	subtract_variable = { col_value = 225 } col_2_$hd$ = { val = 225 target = medicus to_build = herbalist } }
			hospital = { 	subtract_variable = { col_value = 300 } col_2_$hd$ = { val = 300 target = hospital to_build = medicus } }
		} }
		
		
		
	}
}
		
col_1_05 = { random = { chance = 5	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_05 = { random = { chance = 5	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_1_10 = { random = { chance = 10	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_10 = { random = { chance = 10	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_1_25 = { random = { chance = 25	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_25 = { random = { chance = 25	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_1_30 = { random = { chance = 30	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_30 = { random = { chance = 30	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_1_60 = { random = { chance = 60	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_60 = { random = { chance = 60	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_1_90 = { random = { chance = 90	remove_building = $target$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }
col_2_90 = { random = { chance = 90	remove_building = $target$ add_building = $to_build$ set_province_flag = $target$_lost change_variable = { SS_blds = $val$ } } }

		
find_total_loot_value = {
	trigger_switch = {
		on_trigger = has_building
		mathematician_academy = { change_variable = { loot_value = 750 } }
		philosophers_academy = { change_variable = { loot_value = 750 } }
		military_academy = { 	change_variable = { loot_value = 750 } }
		great_library = { 		change_variable = { loot_value = 750 } }
		library = { 			change_variable = { loot_value = 262 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_bath = { 		change_variable = { loot_value = 150 } }
		big_bath = { 		change_variable = { loot_value = 300 } }
	}
	trigger_switch = {
		on_trigger = has_building
		embassy = { 			change_variable = { loot_value = 375 } }
		diplomats_quarter = { 	change_variable = { loot_value = 750 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_townhall = { 		change_variable = { loot_value = 300 } }
		big_townhall = { 		change_variable = { loot_value = 375 } }
		government_palace = { 	change_variable = { loot_value = 600 } }
		government_district = { change_variable = { loot_value = 750 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_grain_depot = { change_variable = { loot_value = 225 } }
		big_grain_depot = { change_variable = { loot_value = 450 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_harbor = { 	change_variable = { loot_value = 150 } }
		big_harbor = { 		change_variable = { loot_value = 300 } }
		harbor_district = { change_variable = { loot_value = 450 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_market = { 	change_variable = { loot_value = 150 } }
		medium_market = { 	change_variable = { loot_value = 225 } }
		great_market = { 	change_variable = { loot_value = 300 } }
	}
	trigger_switch = {
		on_trigger = has_building
		herbalist = { 	change_variable = { loot_value = 150 } }
		medicus = { 	change_variable = { loot_value = 225 } }
		hospital = { 	change_variable = { loot_value = 300 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_army_camp = { 			change_variable = { loot_value = 150 } }
		small_military_settlement = { 	change_variable = { loot_value = 260 } }
		big_military_settlement = { 	change_variable = { loot_value = 375 } }
	}
	if = { limit = { has_building = small_conscription_center } change_variable = { loot_value = 187 } }
	trigger_switch = {
		on_trigger = has_building
		small_water_irrigation = { 	change_variable = { loot_value = 187 } }
		big_water_irrigation = { 	change_variable = { loot_value = 300 } }
		big_estate = { 				change_variable = { loot_value = 412 } }
		
		craftsman = { change_variable = { loot_value = 187 } }
		small_workshop = { 	change_variable = { loot_value = 300 } }
		artisan_district = { change_variable = { loot_value = 412 } }
		
		quarry = { change_variable = { loot_value = 187 } }
		small_mine = { 		change_variable = { loot_value = 300 } }
		big_mine = { 		change_variable = { loot_value = 412 } }
	}
	trigger_switch = {
		on_trigger = has_building
		gravel_road = { 	change_variable = { loot_value = 187 } }
		paved_road = { 		change_variable = { loot_value = 300 } }
		imperial_road = { 	change_variable = { loot_value = 375 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_shipyard = { 	change_variable = { loot_value = 187 } }
		big_shipyard = { 	change_variable = { loot_value = 375 } }
	}
	trigger_switch = {
		on_trigger = has_building
		military_monument = { change_variable = { loot_value = 750 } }
		naval_monument = { 	change_variable = { loot_value = 750 } }
		imperial_palace = { change_variable = { loot_value = 1500 } }
		palace_garden = { 	change_variable = { loot_value = 1500 } }
	}
	trigger_switch = {
		on_trigger = has_building
		taxman = { 			change_variable = { loot_value = 150 } }
		tax_collector = { 	change_variable = { loot_value = 300 } }
	}
	trigger_switch = {
		on_trigger = has_building
		shrine = { 			change_variable = { loot_value = 150 } }
		small_temple = { 	change_variable = { loot_value = 225 } }
		great_temple = { 	change_variable = { loot_value = 300 } }
	}
	trigger_switch = {
		on_trigger = has_building
		small_theater = { 	change_variable = { loot_value = 225 } }
		big_theater = { 	change_variable = { loot_value = 375 } }
		great_theater = { 	change_variable = { loot_value = 525 } }
		huge_theater = { 	change_variable = { loot_value = 750 } }
	}
}

SS_repair_trade_roads_harbor = {
	trigger_switch = {
		on_trigger = has_province_flag
		small_market_lost = { 	clr_province_flag = small_market_lost 	add_building = small_market  ROOT = { add_treasury = -150 } }
		medium_market_lost = { 	clr_province_flag = medium_market_lost 	add_building = medium_market ROOT = { add_treasury = -225 } }
		great_market_lost = { 	clr_province_flag = great_market_lost 	add_building = great_market  ROOT = { add_treasury = -300 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		gravel_road_lost = { 	clr_province_flag = gravel_road_lost 	add_building = gravel_road 	 ROOT = { add_treasury = -187 } }
		paved_road_lost = { 	clr_province_flag = paved_road_lost 	add_building = paved_road 	 ROOT = { add_treasury = -300 } }
		imperial_road_lost = { 	clr_province_flag = imperial_road_lost 	add_building = imperial_road ROOT = { add_treasury = -375 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_harbor_lost = { 	clr_province_flag = small_harbor_lost 	add_building = small_harbor ROOT = { add_treasury = -150 } }
		big_harbor_lost = { 	clr_province_flag = big_harbor_lost 	add_building = big_harbor ROOT = { add_treasury = -300 } }
		harbor_district_lost = { clr_province_flag = harbor_district_lost add_building = harbor_district ROOT = { add_treasury = -450 } }
	}
	
}

SS_repair_temples = {
	trigger_switch = {
		on_trigger = has_province_flag
		shrine_lost = { 		clr_province_flag = shrine_lost 		add_building = shrine 		ROOT = { add_treasury = -150 } }
		small_temple_lost = { 	clr_province_flag = small_temple_lost 	add_building = small_temple ROOT = { add_treasury = -225 } }
		great_temple_lost = { 	clr_province_flag = great_temple_lost 	add_building = great_temple ROOT = { add_treasury = -300 } }

	}
}

SS_repair_health_industry = {
	trigger_switch = {
		on_trigger = has_province_flag
		small_grain_depot_lost = { 	clr_province_flag = small_grain_depot_lost 	add_building = small_grain_depot ROOT = { add_treasury = -225 } }
		big_grain_depot_lost = { 	clr_province_flag = big_grain_depot_lost 	add_building = big_grain_depot ROOT = { add_treasury = -450 } }
		
	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_water_irrigation_lost = { clr_province_flag = small_water_irrigation_lost add_building = small_water_irrigation ROOT = { add_treasury = -187 } }
		big_water_irrigation_lost = { clr_province_flag = big_water_irrigation_lost 	add_building = big_water_irrigation ROOT = { add_treasury = -300 } }
		big_estate_lost = { clr_province_flag = big_estate_lost 			add_building = big_estate ROOT = { add_treasury = -412 } }
		craftsman_lost = { 	clr_province_flag = craftsman_lost 				add_building = craftsman ROOT = { add_treasury = -187 } }
		small_workshop_lost = { clr_province_flag = small_workshop_lost 	add_building = small_workshop ROOT = { add_treasury = -300 } }
		artisan_district_lost = { clr_province_flag = artisan_district_lost add_building = artisan_district ROOT = { add_treasury = -412 } }
		quarry_lost = { 	clr_province_flag = quarry_lost 				add_building = quarry ROOT = { add_treasury = -187 } }
		small_mine_lost = { clr_province_flag = small_mine_lost 			add_building = small_mine ROOT = { add_treasury = -300 } }
		big_mine_lost = { 	clr_province_flag = big_mine_lost 				add_building = big_mine ROOT = { add_treasury = -412 } }

	}
	trigger_switch = {
		on_trigger = has_province_flag
		herbalist_lost = { 	clr_province_flag = herbalist_lost 	add_building = herbalist ROOT = { add_treasury = -150 } }
		medicus_lost = { 	clr_province_flag = medicus_lost 	add_building = medicus ROOT = { add_treasury = -225 } }
		hospital_lost = { 	clr_province_flag = hospital_lost 	add_building = hospital ROOT = { add_treasury = -300 } }

	}
	
}

SS_repair_military_shipyards = {
	if = {
		limit = { has_province_flag = small_conscription_center_lost }
		clr_province_flag = small_conscription_center_lost add_building = small_conscription_center ROOT = { add_treasury = -187 }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_army_camp_lost = { 			clr_province_flag = small_army_camp_lost 			add_building = small_army_camp ROOT = { add_treasury = -150 } }
		small_military_settlement_lost = { 	clr_province_flag = small_military_settlement_lost 	add_building = small_military_settlement ROOT = { add_treasury = -260 } }
		big_military_settlement_lost = { 	clr_province_flag = big_military_settlement_lost 	add_building = big_military_settlement ROOT = { add_treasury = -375 } }

	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_shipyard_lost = { clr_province_flag = small_shipyard_lost add_building = small_shipyard 	ROOT = { add_treasury = -187 } }
		big_shipyard_lost = { 	clr_province_flag = big_shipyard_lost 	add_building = big_shipyard 	ROOT = { add_treasury = -375 } }

	}
	
}

SS_repair_government = {
	trigger_switch = {
		on_trigger = has_province_flag
		small_townhall_lost = { 		clr_province_flag = small_townhall_lost 	add_building = small_townhall ROOT = { add_treasury = -300 } }
		big_townhall_lost = { 			clr_province_flag = big_townhall_lost 		add_building = big_townhall ROOT = { add_treasury = -375 } }
		government_palace_lost = { 		clr_province_flag = government_palace_lost 	add_building = government_palace ROOT = { add_treasury = -600 } }
		government_district_lost = { 	clr_province_flag = government_district_lost add_building = government_district ROOT = { add_treasury = -750 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		taxman_lost = { clr_province_flag = taxman_lost add_building = taxman ROOT = { add_treasury = -150 } }
		tax_collector_lost = { clr_province_flag = tax_collector_lost add_building = tax_collector ROOT = { add_treasury = -300 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		embassy_lost = { clr_province_flag = embassy_lost add_building = embassy ROOT = { add_treasury = -375 } }
		diplomats_quarter_lost = { clr_province_flag = diplomats_quarter_lost add_building = diplomats_quarter ROOT = { add_treasury = -750 } }
	}
}
SS_repair_leisure_education = {
	if = {
		limit = { has_province_flag = military_monument_lost }
		clr_province_flag = military_monument_lost add_building = military_monument ROOT = { add_treasury = -750 }
	}
	if = {
		limit = { has_province_flag = naval_monument_lost }
		clr_province_flag = naval_monument_lost add_building = naval_monument ROOT = { add_treasury = -750 }
	}
	if = {
		limit = { has_province_flag = imperial_palace_lost }
		clr_province_flag = imperial_palace_lost add_building = imperial_palace ROOT = { add_treasury = -1500 }
	}
	if = {
		limit = { has_province_flag = palace_garden_lost }
		clr_province_flag = palace_garden_lost add_building = palace_garden ROOT = { add_treasury = -1500 }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_theater_lost = { 	clr_province_flag = small_theater_lost 	add_building = small_theater 	ROOT = { add_treasury = -225 } }
		big_theater_lost = { 	clr_province_flag = big_theater_lost 	add_building = big_theater 		ROOT = { add_treasury = -375 } }
		great_theater_lost = { 	clr_province_flag = great_theater_lost 	add_building = great_theater 	ROOT = { add_treasury = -525 } }
		huge_theater_lost = { 	clr_province_flag = huge_theater_lost 	add_building = huge_theater 	ROOT = { add_treasury = -750 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		small_bath_lost = { clr_province_flag = small_bath_lost add_building = small_bath ROOT = { add_treasury = -150 } }
		big_bath_lost = { clr_province_flag = big_bath_lost add_building = big_bath ROOT = { add_treasury = -300 } }

	}
	trigger_switch = {
		on_trigger = has_province_flag
		mathematician_academy_lost = { 	clr_province_flag = mathematician_academy_lost add_building = mathematician_academy ROOT = { add_treasury = -1000 } }
		philosophers_academy_lost = { 	clr_province_flag = philosophers_academy_lost add_building = philosophers_academy ROOT = { add_treasury = -1000 } }
		military_academy_lost = { 		clr_province_flag = military_academy_lost add_building = military_academy ROOT = { add_treasury = -1000 } }
		great_library_lost = { 			clr_province_flag = great_library_lost 	add_building = great_library ROOT = { add_treasury = -1000 } }
		library_lost = { 				clr_province_flag = library_lost 		add_building = library ROOT = { add_treasury = -250 } }
	}
	
}



SS_find_existing_ruins = {
	if = {
		limit = { 
			OR = {
				has_province_flag = small_bath_lost				has_province_flag = big_bath_lost		has_province_flag = mathematician_academy_lost
				has_province_flag = philosophers_academy_lost	has_province_flag = military_academy_lost	has_province_flag = great_library_lost	
				has_province_flag = library_lost 				has_province_flag = embassy_lost			has_province_flag = diplomats_quarter_lost
				has_province_flag = small_townhall_lost			has_province_flag = big_townhall_lost		has_province_flag = government_palace_lost
				has_province_flag = government_district_lost	has_province_flag = small_grain_depot_lost	has_province_flag = big_grain_depot_lost
				has_province_flag = small_market_lost			has_province_flag = medium_market_lost		has_province_flag = great_market_lost
				has_province_flag = small_harbor_lost			has_province_flag = big_harbor_lost			has_province_flag = harbor_district_lost
				has_province_flag = small_army_camp_lost			has_province_flag = small_military_settlement_lost
				has_province_flag = big_military_settlement_lost	has_province_flag = small_conscription_center_lost
				has_province_flag = small_water_irrigation_lost has_province_flag = big_water_irrigation_lost has_province_flag = big_estate_lost
				has_province_flag = craftsman_lost 				has_province_flag = small_workshop_lost 	has_province_flag = artisan_district_lost
				has_province_flag = quarry_lost					has_province_flag = small_mine_lost			has_province_flag = big_mine_lost
				has_province_flag = small_shipyard_lost			has_province_flag = big_shipyard_lost
				has_province_flag = military_monument_lost		has_province_flag = naval_monument_lost		has_province_flag = imperial_palace_lost
				has_province_flag = palace_garden_lost			has_province_flag = taxman_lost				has_province_flag = tax_collector_lost
				has_province_flag = shrine_lost					has_province_flag = small_temple_lost		has_province_flag = great_temple_lost
				has_province_flag = small_theater_lost			has_province_flag = big_theater_lost		has_province_flag = great_theater_lost
				has_province_flag = huge_theater_lost			has_province_flag = gravel_road_lost		has_province_flag = paved_road_lost
				has_province_flag = imperial_road_lost			has_province_flag = herbalist_lost			has_province_flag = medicus_lost
				has_province_flag = hospital_lost
			}
		}
		add_building = building_ruins
	}
	
}

SS_clear_land_cost = {
	while = {
		limit = {
			OR = {
				has_province_flag = small_bath_lost				has_province_flag = big_bath_lost		has_province_flag = mathematician_academy_lost
				has_province_flag = philosophers_academy_lost	has_province_flag = military_academy_lost	has_province_flag = great_library_lost	
				has_province_flag = library_lost 				has_province_flag = embassy_lost			has_province_flag = diplomats_quarter_lost
				has_province_flag = small_townhall_lost			has_province_flag = big_townhall_lost		has_province_flag = government_palace_lost
				has_province_flag = government_district_lost	has_province_flag = small_grain_depot_lost	has_province_flag = big_grain_depot_lost
				has_province_flag = small_market_lost			has_province_flag = medium_market_lost		has_province_flag = great_market_lost
				has_province_flag = small_harbor_lost			has_province_flag = big_harbor_lost			has_province_flag = harbor_district_lost
				has_province_flag = small_army_camp_lost			has_province_flag = small_military_settlement_lost
				has_province_flag = big_military_settlement_lost	has_province_flag = small_conscription_center_lost
				has_province_flag = small_water_irrigation_lost has_province_flag = big_water_irrigation_lost has_province_flag = big_estate_lost
				has_province_flag = craftsman_lost 				has_province_flag = small_workshop_lost 	has_province_flag = artisan_district_lost
				has_province_flag = quarry_lost					has_province_flag = small_mine_lost			has_province_flag = big_mine_lost
				has_province_flag = small_shipyard_lost			has_province_flag = big_shipyard_lost
				has_province_flag = military_monument_lost		has_province_flag = naval_monument_lost		has_province_flag = imperial_palace_lost
				has_province_flag = palace_garden_lost			has_province_flag = taxman_lost				has_province_flag = tax_collector_lost
				has_province_flag = shrine_lost					has_province_flag = small_temple_lost		has_province_flag = great_temple_lost
				has_province_flag = small_theater_lost			has_province_flag = big_theater_lost		has_province_flag = great_theater_lost
				has_province_flag = huge_theater_lost			has_province_flag = gravel_road_lost		has_province_flag = paved_road_lost
				has_province_flag = imperial_road_lost			has_province_flag = herbalist_lost			has_province_flag = medicus_lost
				has_province_flag = hospital_lost
			}
		}
		trigger_switch = {
			on_trigger = has_province_flag
			small_bath_lost = { clr_province_flag = small_bath_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			big_bath_lost = { clr_province_flag = big_bath_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			mathematician_academy_lost = { clr_province_flag = mathematician_academy_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			philosophers_academy_lost = { clr_province_flag = philosophers_academy_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			military_academy_lost = { clr_province_flag = military_academy_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			great_library_lost = { clr_province_flag = great_library_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			library_lost = { clr_province_flag = library_lost  ROOT = { add_treasury = -17 add_adm_power = -1 } }
			embassy_lost = { clr_province_flag = embassy_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			diplomats_quarter_lost = { clr_province_flag = diplomats_quarter_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			small_townhall_lost = { clr_province_flag = small_townhall_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			big_townhall_lost = { clr_province_flag = big_townhall_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			government_palace_lost = { clr_province_flag = government_palace_lost  ROOT = { add_treasury = -40 add_adm_power = -4 } }
			government_district_lost = { clr_province_flag = government_district_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			small_grain_depot_lost = { clr_province_flag = small_grain_depot_lost  ROOT = { add_treasury = -15 add_adm_power = -1 } }
			big_grain_depot_lost = { clr_province_flag = big_grain_depot_lost  ROOT = { add_treasury = -30 add_adm_power = -3 } }
			small_market_lost = { clr_province_flag = small_market_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			medium_market_lost = { clr_province_flag = medium_market_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			great_market_lost = { clr_province_flag = great_market_lost  ROOT = { add_treasury = -30 add_adm_power = -3 } }
			small_harbor_lost = { clr_province_flag = small_harbor_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			big_harbor_lost = { clr_province_flag = big_harbor_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			harbor_district_lost = { clr_province_flag = harbor_district_lost  ROOT = { add_treasury = -30 add_adm_power = -3 } }
			small_army_camp_lost = { clr_province_flag = small_army_camp_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			small_military_settlement_lost = { clr_province_flag = small_military_settlement_lost  ROOT = { add_treasury = -17 add_adm_power = -1 } }
			big_military_settlement_lost = { clr_province_flag = big_military_settlement_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			small_conscription_center_lost = { clr_province_flag = small_conscription_center_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			small_water_irrigation_lost = { clr_province_flag = small_water_irrigation_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			big_water_irrigation_lost = { clr_province_flag = big_water_irrigation_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			big_estate_lost = { clr_province_flag = big_estate_lost  ROOT = { add_treasury = -27 add_adm_power = -2 } }
			craftsman_lost = { clr_province_flag = craftsman_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			small_workshop_lost = { clr_province_flag = small_workshop_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			artisan_district_lost = { clr_province_flag = artisan_district_lost  ROOT = { add_treasury = -27 add_adm_power = -2 } }
			quarry_lost = { clr_province_flag = quarry_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			small_mine_lost = { clr_province_flag = small_mine_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			big_mine_lost = { clr_province_flag = big_mine_lost  ROOT = { add_treasury = -27 add_adm_power = -2 } }
			small_shipyard_lost = { clr_province_flag = small_shipyard_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			big_shipyard_lost = { clr_province_flag = big_shipyard_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			military_monument_lost = { clr_province_flag = military_monument_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			naval_monument_lost = { clr_province_flag = naval_monument_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			imperial_palace_lost = { clr_province_flag = imperial_palace_lost  ROOT = { add_treasury = -100 add_adm_power = -10 } }
			palace_garden_lost = { clr_province_flag = palace_garden_lost  ROOT = { add_treasury = -100 add_adm_power = -10 } }
			taxman_lost = { clr_province_flag = taxman_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			tax_collector_lost = { clr_province_flag = tax_collector_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			shrine_lost = { clr_province_flag = shrine_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			small_temple_lost = { clr_province_flag = small_temple_lost  ROOT = { add_treasury = -15 add_adm_power = -1 } }
			great_temple_lost = { clr_province_flag = great_temple_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			small_theater_lost = { clr_province_flag = small_theater_lost  ROOT = { add_treasury = -15 add_adm_power = -1 } }
			big_theater_lost = { clr_province_flag = big_theater_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			great_theater_lost = { clr_province_flag = great_theater_lost  ROOT = { add_treasury = -35 add_adm_power = -3 } }
			huge_theater_lost = { clr_province_flag = huge_theater_lost  ROOT = { add_treasury = -50 add_adm_power = -5 } }
			gravel_road_lost = { clr_province_flag = gravel_road_lost  ROOT = { add_treasury = -12 add_adm_power = -1 } }
			paved_road_lost = { clr_province_flag = paved_road_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }
			imperial_road_lost = { clr_province_flag = imperial_road_lost  ROOT = { add_treasury = -25 add_adm_power = -2 } }
			herbalist_lost = { clr_province_flag = herbalist_lost  ROOT = { add_treasury = -10 add_adm_power = -1 } }
			medicus_lost = { clr_province_flag = medicus_lost  ROOT = { add_treasury = -15 add_adm_power = -1 } }
			hospital_lost = { clr_province_flag = hospital_lost  ROOT = { add_treasury = -20 add_adm_power = -2 } }


		}
	}
}

SS_cleanup_old_ruins = {
	if = { limit = { had_province_flag = { flag = small_bath_lost days = 1825 } } clr_province_flag = small_bath_lost }
	if = { limit = { had_province_flag = { flag = big_bath_lost days = 1825 } } clr_province_flag = big_bath_lost }
	if = { limit = { had_province_flag = { flag = mathematician_academy_lost days = 1825 } } clr_province_flag = mathematician_academy_lost }
	if = { limit = { had_province_flag = { flag = philosophers_academy_lost days = 1825 } } clr_province_flag = philosophers_academy_lost }
	if = { limit = { had_province_flag = { flag = military_academy_lost days = 1825 } } clr_province_flag = military_academy_lost }
	if = { limit = { had_province_flag = { flag = great_library_lost days = 1825 } } clr_province_flag = great_library_lost }
	if = { limit = { had_province_flag = { flag = library_lost days = 1825 } } clr_province_flag = library_lost }
	if = { limit = { had_province_flag = { flag = embassy_lost days = 1825 } } clr_province_flag = embassy_lost }
	if = { limit = { had_province_flag = { flag = diplomats_quarter_lost days = 1825 } } clr_province_flag = diplomats_quarter_lost }
	if = { limit = { had_province_flag = { flag = small_townhall_lost days = 1825 } } clr_province_flag = small_townhall_lost }
	if = { limit = { had_province_flag = { flag = big_townhall_lost days = 1825 } } clr_province_flag = big_townhall_lost }
	if = { limit = { had_province_flag = { flag = government_palace_lost days = 1825 } } clr_province_flag = government_palace_lost }
	if = { limit = { had_province_flag = { flag = government_district_lost days = 1825 } } clr_province_flag = government_district_lost }
	if = { limit = { had_province_flag = { flag = small_grain_depot_lost days = 1825 } } clr_province_flag = small_grain_depot_lost }
	if = { limit = { had_province_flag = { flag = big_grain_depot_lost days = 1825 } } clr_province_flag = big_grain_depot_lost }
	if = { limit = { had_province_flag = { flag = small_market_lost days = 1825 } } clr_province_flag = small_market_lost }
	if = { limit = { had_province_flag = { flag = medium_market_lost days = 1825 } } clr_province_flag = medium_market_lost }
	if = { limit = { had_province_flag = { flag = great_market_lost days = 1825 } } clr_province_flag = great_market_lost }
	if = { limit = { had_province_flag = { flag = small_harbor_lost days = 1825 } } clr_province_flag = small_harbor_lost }
	if = { limit = { had_province_flag = { flag = big_harbor_lost days = 1825 } } clr_province_flag = big_harbor_lost }
	if = { limit = { had_province_flag = { flag = harbor_district_lost days = 1825 } } clr_province_flag = harbor_district_lost }
	if = { limit = { had_province_flag = { flag = small_army_camp_lost days = 1825 } } clr_province_flag = small_army_camp_lost }
	if = { limit = { had_province_flag = { flag = small_military_settlement_lost days = 1825 } } clr_province_flag = small_military_settlement_lost }
	if = { limit = { had_province_flag = { flag = big_military_settlement_lost days = 1825 } } clr_province_flag = big_military_settlement_lost }
	if = { limit = { had_province_flag = { flag = small_conscription_center_lost days = 1825 } } clr_province_flag = small_conscription_center_lost }
	if = { limit = { had_province_flag = { flag = small_water_irrigation_lost days = 1825 } } clr_province_flag = small_water_irrigation_lost }
	if = { limit = { had_province_flag = { flag = big_water_irrigation_lost days = 1825 } } clr_province_flag = big_water_irrigation_lost }
	if = { limit = { had_province_flag = { flag = big_estate_lost days = 1825 } } clr_province_flag = big_estate_lost }
	if = { limit = { had_province_flag = { flag = craftsman_lost days = 1825 } } clr_province_flag = craftsman_lost }
	if = { limit = { had_province_flag = { flag = small_workshop_lost days = 1825 } } clr_province_flag = small_workshop_lost }
	if = { limit = { had_province_flag = { flag = artisan_district_lost days = 1825 } } clr_province_flag = artisan_district_lost }
	if = { limit = { had_province_flag = { flag = quarry_lost days = 1825 } } clr_province_flag = quarry_lost }
	if = { limit = { had_province_flag = { flag = small_mine_lost days = 1825 } } clr_province_flag = small_mine_lost }
	if = { limit = { had_province_flag = { flag = big_mine_lost days = 1825 } } clr_province_flag = big_mine_lost }
	if = { limit = { had_province_flag = { flag = small_shipyard_lost days = 1825 } } clr_province_flag = small_shipyard_lost }
	if = { limit = { had_province_flag = { flag = big_shipyard_lost days = 1825 } } clr_province_flag = big_shipyard_lost }
	if = { limit = { had_province_flag = { flag = military_monument_lost days = 1825 } } clr_province_flag = military_monument_lost }
	if = { limit = { had_province_flag = { flag = naval_monument_lost days = 1825 } } clr_province_flag = naval_monument_lost }
	if = { limit = { had_province_flag = { flag = imperial_palace_lost days = 1825 } } clr_province_flag = imperial_palace_lost }
	if = { limit = { had_province_flag = { flag = palace_garden_lost days = 1825 } } clr_province_flag = palace_garden_lost }
	if = { limit = { had_province_flag = { flag = taxman_lost days = 1825 } } clr_province_flag = taxman_lost }
	if = { limit = { had_province_flag = { flag = tax_collector_lost days = 1825 } } clr_province_flag = tax_collector_lost }
	if = { limit = { had_province_flag = { flag = shrine_lost days = 1825 } } clr_province_flag = shrine_lost }
	if = { limit = { had_province_flag = { flag = small_temple_lost days = 1825 } } clr_province_flag = small_temple_lost }
	if = { limit = { had_province_flag = { flag = great_temple_lost days = 1825 } } clr_province_flag = great_temple_lost }
	if = { limit = { had_province_flag = { flag = small_theater_lost days = 1825 } } clr_province_flag = small_theater_lost }
	if = { limit = { had_province_flag = { flag = big_theater_lost days = 1825 } } clr_province_flag = big_theater_lost }
	if = { limit = { had_province_flag = { flag = great_theater_lost days = 1825 } } clr_province_flag = great_theater_lost }
	if = { limit = { had_province_flag = { flag = huge_theater_lost days = 1825 } } clr_province_flag = huge_theater_lost }
	if = { limit = { had_province_flag = { flag = gravel_road_lost days = 1825 } } clr_province_flag = gravel_road_lost }
	if = { limit = { had_province_flag = { flag = paved_road_lost days = 1825 } } clr_province_flag = paved_road_lost }
	if = { limit = { had_province_flag = { flag = imperial_road_lost days = 1825 } } clr_province_flag = imperial_road_lost }
	if = { limit = { had_province_flag = { flag = herbalist_lost days = 1825 } } clr_province_flag = herbalist_lost }
	if = { limit = { had_province_flag = { flag = medicus_lost days = 1825 } } clr_province_flag = medicus_lost }
	if = { limit = { had_province_flag = { flag = hospital_lost days = 1825 } } clr_province_flag = hospital_lost }
	

}

SS_store_building_to_flag = {
	if = { limit = { has_building = small_bath } set_province_flag = small_bath_kept }
	if = { limit = { has_building = big_bath } set_province_flag = big_bath_kept }
	if = { limit = { has_building = mathematician_academy } set_province_flag = mathematician_academy_kept }
	if = { limit = { has_building = philosophers_academy } set_province_flag = philosophers_academy_kept }
	if = { limit = { has_building = military_academy } set_province_flag = military_academy_kept }
	if = { limit = { has_building = great_library } set_province_flag = great_library_kept }
	if = { limit = { has_building = library } set_province_flag = library_kept }
	if = { limit = { has_building = embassy } set_province_flag = embassy_kept }
	if = { limit = { has_building = diplomats_quarter } set_province_flag = diplomats_quarter_kept }
	if = { limit = { has_building = small_townhall } set_province_flag = small_townhall_kept }
	if = { limit = { has_building = big_townhall } set_province_flag = big_townhall_kept }
	if = { limit = { has_building = government_palace } set_province_flag = government_palace_kept }
	if = { limit = { has_building = government_district } set_province_flag = government_district_kept }
	if = { limit = { has_building = small_grain_depot } set_province_flag = small_grain_depot_kept }
	if = { limit = { has_building = big_grain_depot } set_province_flag = big_grain_depot_kept }
	if = { limit = { has_building = small_market } set_province_flag = small_market_kept }
	if = { limit = { has_building = medium_market } set_province_flag = medium_market_kept }
	if = { limit = { has_building = great_market } set_province_flag = great_market_kept }
	if = { limit = { has_building = small_harbor } set_province_flag = small_harbor_kept }
	if = { limit = { has_building = big_harbor } set_province_flag = big_harbor_kept }
	if = { limit = { has_building = harbor_district } set_province_flag = harbor_district_kept }
	if = { limit = { has_building = small_army_camp } set_province_flag = small_army_camp_kept }
	if = { limit = { has_building = small_military_settlement } set_province_flag = small_military_settlement_kept }
	if = { limit = { has_building = big_military_settlement } set_province_flag = big_military_settlement_kept }
	if = { limit = { has_building = small_conscription_center } set_province_flag = small_conscription_center_kept }
	if = { limit = { has_building = small_water_irrigation } set_province_flag = small_water_irrigation_kept }
	if = { limit = { has_building = big_water_irrigation } set_province_flag = big_water_irrigation_kept }
	if = { limit = { has_building = big_estate } set_province_flag = big_estate_kept }
	if = { limit = { has_building = craftsman } set_province_flag = craftsman_kept }
	if = { limit = { has_building = small_workshop } set_province_flag = small_workshop_kept }
	if = { limit = { has_building = artisan_district } set_province_flag = artisan_district_kept }
	if = { limit = { has_building = quarry } set_province_flag = quarry_kept }
	if = { limit = { has_building = small_mine } set_province_flag = small_mine_kept }
	if = { limit = { has_building = big_mine } set_province_flag = big_mine_kept }
	if = { limit = { has_building = small_shipyard } set_province_flag = small_shipyard_kept }
	if = { limit = { has_building = big_shipyard } set_province_flag = big_shipyard_kept }
	if = { limit = { has_building = military_monument } set_province_flag = military_monument_kept }
	if = { limit = { has_building = naval_monument } set_province_flag = naval_monument_kept }
	if = { limit = { has_building = imperial_palace } set_province_flag = imperial_palace_kept }
	if = { limit = { has_building = palace_garden } set_province_flag = palace_garden_kept }
	if = { limit = { has_building = taxman } set_province_flag = taxman_kept }
	if = { limit = { has_building = tax_collector } set_province_flag = tax_collector_kept }
	if = { limit = { has_building = shrine } set_province_flag = shrine_kept }
	if = { limit = { has_building = small_temple } set_province_flag = small_temple_kept }
	if = { limit = { has_building = great_temple } set_province_flag = great_temple_kept }
	if = { limit = { has_building = small_theater } set_province_flag = small_theater_kept }
	if = { limit = { has_building = big_theater } set_province_flag = big_theater_kept }
	if = { limit = { has_building = great_theater } set_province_flag = great_theater_kept }
	if = { limit = { has_building = huge_theater } set_province_flag = huge_theater_kept }
	if = { limit = { has_building = gravel_road } set_province_flag = gravel_road_kept }
	if = { limit = { has_building = paved_road } set_province_flag = paved_road_kept }
	if = { limit = { has_building = imperial_road } set_province_flag = imperial_road_kept }
	if = { limit = { has_building = herbalist } set_province_flag = herbalist_kept }
	if = { limit = { has_building = medicus } set_province_flag = medicus_kept }
	if = { limit = { has_building = hospital } set_province_flag = hospital_kept }
	
}
