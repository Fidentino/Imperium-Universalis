
#Ask for League Member
ask_for_league_member_subject = {
	category = influence
	alert_index = 41
	alert_tooltip = ask_for_league_member_subject_alert_tooltip.1
	
	require_acceptance = yes
	is_visible = {
		is_subject = no
		culture_group = hellenic
		total_development = 40
		government_rank = 2
		capital_scope = {
			OR = {
				superregion = asia_superregion
				superregion = haemusia_superregion
				superregion = italia_superregion
				superregion = macedonia_superregion
			}
		}
		FROM = {
			capital_scope = {
				OR = {
					superregion = asia_superregion
					superregion = haemusia_superregion
					superregion = italia_superregion
					superregion = macedonia_superregion
				}
			}
			NOT = { has_country_modifier = banned_league_modifier }
			NOT = { total_development = 30 }
			is_subject = no
			NOT = { government_rank = 3 }
		}
	}
	is_allowed = {
		hidden_trigger = {
			is_subject = no
			culture_group = hellenic
			total_development = 40
			government_rank = 2
			capital_scope = {
				OR = {
					superregion = asia_superregion
					superregion = haemusia_superregion
					superregion = italia_superregion
					superregion = macedonia_superregion
				}
			}
			FROM = {
				capital_scope = {
					OR = {
						superregion = asia_superregion
						superregion = haemusia_superregion
						superregion = italia_superregion
						superregion = macedonia_superregion
					}
				}
				NOT = { has_country_modifier = banned_league_modifier }
				NOT = { total_development = 30 }
				is_subject = no
				NOT = { government_rank = 3 }
			}
		}
		OR = {
			alliance_with = FROM
			reverse_has_opinion = {
				who = FROM
				value = 160
			}
		}
		FROM = {
			NOT = { is_rival = ROOT }
			NOT = {
				any_ally = {
					is_rival = ROOT
				}
			}
		}
		is_bankrupt = no
		NOT = { war_with = FROM }
		stability = 0
	}
	on_accept = {
		add_prestige = 2
		create_subject = {
			subject_type = league_member_subject
			subject = FROM
		}
	}
	
	ai_acceptance = {
		add_entry = {
			name = TOTAL_DEVELOPMENT
			export_to_variable = {
				variable_name = ai_value
				value = total_development
				who = FROM
			}
			multiply_variable = { which = ai_value value = -2 }
		}
		add_entry = {
			name = TRUST
			export_to_variable = {
				variable_name = ai_value
				value = trust
				who = FROM
				with = ROOT
			}
			subtract_variable = { which = ai_value value = 70 }
		}
		add_entry = {
			name = ARMY_SIZE
			export_to_variable = {
				variable_name = ai_value
				value = land_forcelimit
				who = FROM
			}
			change_variable = { which = ai_value value = 1 }
		}
		add_entry = {
			name = NAVY_SIZE
			export_to_variable = {
				variable_name = ai_value
				value = navy_size
				who = FROM
			}
			change_variable = { which = ai_value value = 1 }
		}
		add_entry = {
			name = PRESTIGE
			export_to_variable = {
				variable_name = ai_value
				value = prestige
				who = FROM
			}
			divide_variable = { which = ai_value value = 10 }
		}
		add_entry = {
			name = DIPLOMATIC_REPUTATION
			export_to_variable = {
				variable_name = ai_value
				value = modifier:diplomatic_reputation
				with = ROOT
			}
			multiply_variable = { which = ai_value value = 6 }
		}
		add_entry = {
			name = DIFFERENT_PRIMARY_CULTURE
			limit = { NOT = { primary_culture = FROM } }
			export_to_variable = {
				which = ai_value
				value = -10
			}
		}
		add_entry = {
			name = BASE_VALUE_CUSTOM
			limit = { FROM = { ai = yes } }
			export_to_variable = {
				which = ai_value
				value = -10
			}
		}
	}
	
	ai_will_do = {
		has_any_disaster = no
		FROM = {
			NOT = { army_size = ROOT }
			NOT = { navy_size = ROOT }
			NOT = { total_development = ROOT }
		}
		reverse_has_opinion = {
			who = FROM
			value = 150
		}
		stability = 1
		army_size = 8
		is_at_war = no
	}
}

#Removes League Member
remove_league_member_subject = {
	category = influence
	alert_index = 41
	alert_tooltip = remove_league_member_subject_alert_tooltip.1
	
	require_acceptance = no
	is_visible = {
		FROM = {
			is_subject_of_type = league_member_subject
			is_subject_of = ROOT
		}
	}
	is_allowed = {
		hidden_trigger = {
			FROM = {
				is_subject_of_type = league_member_subject
				is_subject_of = ROOT
			}
		}
		is_at_war = no
		has_any_disaster = no
		FROM = {
			is_subject_of_type = league_member_subject
			is_subject_of = ROOT
		}
	}
	on_accept = {
		FROM = {
			grant_independence = yes
			add_truce_with = ROOT
			add_country_modifier = {
				name = banned_league_modifier
				duration = 3650
			}
			add_opinion = {
				who = ROOT
    			modifier = banned_from_league_opinion
			}
		}
		add_prestige = -5
	}
	
	ai_will_do = {
		FROM = {
			OR = {
				total_development = ROOT
				liberty_desire = 60
			}
		}
	}
}

#Settle Clerurchy
settle_clerurchy_interaction = {
	category = influence
	alert_index = 41
	alert_tooltip = settle_clerurchy_interaction_alert_tooltip.1
	require_acceptance = no

	is_visible = {
		FROM = {
			is_subject_of_type = league_member_subject
			is_subject_of = ROOT
		}
		league_member_subject = 6
		NOT = { has_country_modifier = settled_clerurch_modifier }
	}
	is_allowed = {
		hidden_trigger = {
			FROM = {
				is_subject_of_type = league_member_subject
				is_subject_of = ROOT
			}
			league_member_subject = 6
			NOT = { has_country_modifier = settled_clerurch_modifier }
		}
		is_at_war = no
		has_any_disaster = no
		absolutism = 20
		stability = 1
		capital_scope = { base_manpower = 2 }
		FROM = {
			NOT = { total_development = ROOT }
			NOT = { army_size = ROOT }
			NOT = { navy_size = ROOT }
			NOT = { liberty_desire = 50 }
			has_opinion = {
				who = ROOT
				value = 50
			}
		}
	}
	on_accept = {
		add_absolutism = -5
		add_country_modifier = {
			name = settled_clerurch_modifier
			duration = 3650
		}
		every_subject_country = {
			limit = {
				is_subject_of_type = league_member_subject
				NOT = { TAG = FROM }
			}
			add_opinion = {
				who = ROOT
    			modifier = banned_from_league_opinion
			}
			add_liberty_desire = 5
		}
		hidden_effect = {
			capital_scope = { add_base_manpower = -1 }
			FROM = {
				random_owned_province = {
					if = {
						limit = { is_prosperous = yes }
						add_core = ROOT
						cede_province = ROOT
						change_culture = ROOT
						change_religion = ROOT
						add_base_production = -1
					}
					else = {
						add_core = ROOT
						cede_province = ROOT
						change_culture = ROOT
						change_religion = ROOT
						add_base_production = -1
					}
				}
			}
		}
		FROM = {
			if = {
				limit = { exists = yes }
				add_opinion = {
					who = ROOT
					modifier = recently_settled_clerurch_opinion
				}
				add_liberty_desire = 20
			}
		}
	}
	
	ai_will_do = {
		personality = ai_militarist
		stability = 1
		absolutism = 30
		total_development = 60
		FROM = {
			NOT = { total_development = ROOT }
			NOT = { liberty_desire = 60 }
		}
	}
}
